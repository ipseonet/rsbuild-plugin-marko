"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.normalizeUrl = void 0;
function normalizeUrl(url) {
    const urlString = url.trim();
    if (/^data:/i.test(urlString)) {
        return urlString;
    }
    const protocol = urlString.indexOf("//") !== -1 ? `${urlString.split("//")[0]}//` : "";
    const components = urlString
        .replace(new RegExp(protocol, "i"), "")
        .split("/");
    const host = components[0].toLowerCase().replace(/\.$/, "");
    components[0] = "";
    const path = components
        .reduce((accumulator, item) => {
        switch (item) {
            case "..":
                accumulator.pop();
                break;
            case ".":
                break;
            default:
                accumulator.push(item);
        }
        return accumulator;
    }, [])
        .join("/");
    return protocol + host + path;
}
exports.normalizeUrl = normalizeUrl;
