"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule = true;exports.default = void 0;var _babelUtils = require("@marko/babel-utils");
var _compiler = require("@marko/compiler");
var _styleValue = _interopRequireDefault(require("marko/src/runtime/helpers/style-value"));

var _withPreviousLocation = _interopRequireDefault(require("../../../util/with-previous-location"));var _default = exports.default =

{
  exit(tag, _, value) {
    const {
      hub: { file }
    } = tag;
    if (!(0, _babelUtils.isNativeTag)(tag)) return;

    const computed = (0, _babelUtils.computeNode)(value.node);
    if (computed) {
      const str = (0, _styleValue.default)(computed.value);
      if (str) {
        value.replaceWith(_compiler.types.stringLiteral(str));
      } else {
        value.parentPath.remove();
      }
    } else if (!value.isTemplateLiteral()) {
      value.replaceWith(
        (0, _withPreviousLocation.default)(
          _compiler.types.callExpression(
            (0, _babelUtils.importDefault)(
              file,
              "marko/src/runtime/helpers/style-value.js",
              "marko_style_merge"
            ),
            [value.node]
          ),
          value.node
        )
      );
    }
  }
};