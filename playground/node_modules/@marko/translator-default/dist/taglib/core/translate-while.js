"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule = true;exports.exit = exit;var _babelUtils = require("@marko/babel-utils");




var _compiler = require("@marko/compiler");

var _withPreviousLocation = _interopRequireDefault(require("../../util/with-previous-location"));

function exit(path) {
  (0, _babelUtils.assertNoParams)(path);
  (0, _babelUtils.assertNoAttributes)(path);
  const arg = (0, _babelUtils.getArgOrSequence)(path);

  if (!arg) {
    throw path.
    get("name").
    buildCodeFrameError(
      "A condition is required for the <while(condition)> tag."
    );
  }

  path.replaceWith(
    (0, _withPreviousLocation.default)(
      _compiler.types.whileStatement(
        (0, _babelUtils.getArgOrSequence)(path),
        _compiler.types.blockStatement(path.node.body.body)
      ),
      path.node
    )
  );
}